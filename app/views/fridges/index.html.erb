<div class="container">
  <div class="hero-section">
    <h2>My Fridge</h2>
    <p>Manage your ingredients and utensils</p>
  </div>

  <div class="fridge-content">
    <div class="ingredients-column">

      <div class="fridge-section ingredients-section">
        <h3>My ingredients</h3>
        <div class="items-list">
          <ul>
            <% @fridge.ingredients.each do |ingredient| %>
              <li class="ingredient-item">

                <span class="ingredient-name"><%= ingredient.name %></span>
                <span class="ingredient-qty"><%= ingredient.quantity %></span>
                <span class="ingredient-unit"><%= ingredient.unit %></span>

                <button type="button"
                        class="btn-primary edit-btn"
                        onclick="this.classList.add('d-none'); this.nextElementSibling.classList.remove('d-none');">
                  Edit
                </button>
                <div class="d-none edit-form">
                  <div class="form-section inline-form">
                    <%= form_with model: [@fridge, ingredient], local: true do |f| %>
                      <%= f.text_field :name, placeholder: "Name", class: "input-field" %>
                      <%= f.number_field :quantity, step: 1, class: "input-field" %>
                      <%= f.submit "Save", class: "btn-primary" %>
                    <% end %>
                  </div>
                </div>

                <%= link_to "X",
                  fridge_ingredient_path(@fridge, ingredient),
                  id: "delete-ingredient-btn",
                  class: "btn-primary delete-btn",
                  data: { turbo_method: :delete } %>

              </li>
            <% end %>
          </ul>
        </div>
      </div>

      <div class="form-section">
        <%= simple_form_for [@fridge, @ingredient] do |f| %>
          <%= f.input :name, placeholder: "Add an ingredient", label: false %>
          <%= f.input :quantity, placeholder: "Quantity", label: false %>
          <%= f.input :unit, collection: Ingredient::UNITS, include_blank: false, label: false %>
          <%= f.submit "Add", class: "btn-primary" %>
        <% end %>
      </div>

    </div>

    <div class="ustensils-column">

      <div class="fridge-section utensils-section">
        <h3>My ustensils</h3>
        <div class="items-list">
          <ul>
            <% @fridge.ustensils.each do |ustensil| %>
              <li class="d-flex justify-content-between">
                <p><%= ustensil.name %></p>
                <%= link_to "X",
                  fridge_ustensil_path(@fridge, ustensil),
                  id: "delete-ustensil-btn",
                  class: "btn-primary delete-btn",
                  data: { turbo_method: :delete } %>
              </li>
            <% end %>
          </ul>
        </div>
      </div>

      <div class="form-section">
        <%= simple_form_for [@fridge, @ustensil] do |f| %>
          <%= f.input :name, collection: Ustensil::USTENSIL, include_blank: false, label: false %>
          <%= f.submit "Add", class: "btn-primary" %>
        <% end %>
      </div>

    </div>
  </div>
</div>
